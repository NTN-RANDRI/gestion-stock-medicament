<style>
  input.ng-touched.ng-invalid {
    outline: 2px solid var(--destructive);
  }
</style>

<form
  class="card z-10 w-[500px] overflow-hidden"
  (submit)="envoiDemande($event)"
>
  <!-- tete -->
  <div
    class="bg-primary text-primary-foreground mb-4 flex justify-between px-4 py-3"
  >
    <p class="text-xl font-semibold">Panier</p>
    <!-- <p>{{ cart.length }} {{ cart.length < 2 ? "article" : "articles" }}</p> -->
    <button
      type="button"
      (click)="close()"
      class="hover:bg-opacity-10 mt-1 flex h-8 w-8 items-center justify-center rounded-full hover:bg-black/20 sm:mt-0 sm:ml-3"
    >
      <svg
        class="h-5 w-5"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="M6 18L18 6M6 6l12 12"
        />
      </svg>
    </button>
  </div>

  <!-- <hr class="text-border" /> -->

  <!-- form -->
  <div class="mb-6 px-4">
    <h4 class="text-md mb-3 font-medium">Informations du client</h4>
    <div class="space-y-3">
      <div>
        <label for="client-name" class="label">Nom du client</label>
        <div class="relative">
          <div
            class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-3"
          >
            <i class="fas fa-user text-muted-foreground"></i>
          </div>
          <input
            type="text"
            id="client-name"
            class="border-input focus:ring-ring focus:border-ring w-full rounded-md border py-2 pr-3 pl-10 shadow-sm focus:ring-2 focus:outline-none"
            placeholder="Entrez le nom..."
            [formControl]="nomClient"
          />
        </div>
        <p
          class="text-destructive"
          *ngIf="nomClient.invalid && nomClient.touched"
        >
          <span *ngIf="nomClient.hasError('required')">Required</span>
        </p>
      </div>
    </div>
  </div>

  <!-- Liste des médicaments -->
  <div class="mb-4 px-4">
    <div class="border-border divide-border divide-y rounded-lg border">
      <p class="py-2 text-center" *ngIf="cart.length === 0">vide</p>
      <!-- Item -->
      <div class="p-4" *ngFor="let medicament of cart">
        <div class="flex items-start justify-between gap-4">
          <!-- Info médicament -->
          <div class="flex min-w-0 flex-1 items-center gap-3">
            <div
              class="bg-accent flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-md"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="text-accent-foreground h-5 w-5"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
                />
              </svg>
            </div>
            <div class="truncate">
              <h3 class="truncate text-sm font-medium">
                {{ medicament.nomMedicament }}
              </h3>
            </div>
          </div>

          <!-- Conteneurs séparés -->
          <div class="flex items-center gap-6">
            <!-- Quantité -->
            <div class="flex min-w-[70px] flex-col items-center">
              <span class="text-muted-foreground text-xs">Quantité</span>
              <span class="text-sm font-medium">{{ medicament.quantite }}</span>
            </div>

            <!-- Prix -->
            <div class="flex min-w-[80px] flex-col items-center">
              <span class="text-muted-foreground text-xs">Total</span>
              <span class="text-sm font-medium"
                >{{ medicament.prixMedicament * medicament.quantite }} ar</span
              >
            </div>

            <!-- Bouton Supprimer -->
            <div class="flex items-center">
              <button
                type="button"
                class="text-destructive hover:bg-destructive/10 rounded-md p-1 transition-colors"
                title="Supprimer"
                (click)="remove(medicament.id)"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-4 w-4"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"
                  />
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Total -->
  <div class="mb-4 px-4">
    <div class="bg-secondary mt-4 rounded-lg p-3">
      <div class="flex items-center justify-between">
        <span class="font-medium">Total</span>
        <span class="text-lg font-bold">{{ prixTotal }} ar</span>
      </div>
    </div>
  </div>

  <!-- Footer du modal -->
  <div class="bg-secondary px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
    <button
      type="submit"
      class="bg-green hover:bg-opacity-90 focus:ring-green inline-flex w-full justify-center rounded-md border border-transparent px-4 py-2 text-base font-medium text-white shadow-sm focus:ring-2 focus:ring-offset-2 focus:outline-none sm:ml-3 sm:w-auto sm:text-sm"
    >
      Valider la commande
    </button>
    <!-- <button
      type="button"
      (click)="close()"
      class="border-border text-destructive-foreground bg-destructive hover:bg-destructive/90 focus:ring-ring mt-3 inline-flex w-full justify-center rounded-md border px-4 py-2 text-base font-medium shadow-sm focus:ring-2 focus:ring-offset-2 focus:outline-none sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"
    >
      Reset
    </button> -->
  </div>
</form>

<!-- formulaire -->
<!-- <form (submit)="envoiDemande($event)">
    <div class="px-4 pb-4">
      <div>
        <input
          class="input w-full px-2 py-0.5"
          type="text"
          placeholder="Nom client..."
          [formControl]="nomClient"
        />
        <p
          class="text-destructive"
          *ngIf="nomClient.invalid && nomClient.touched"
        >
          <span *ngIf="nomClient.hasError('required')">Required</span>
        </p>
      </div>

      <div class="pt-4"></div>
      <button class="button-primary w-full" type="submit">Confirmer</button>
    </div>
  </form> -->
